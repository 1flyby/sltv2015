<!DOCTYPE html>
<html>
<head>
	<title>scrollTry</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.js"></script>
<style>
:root {--scrollTime;}
body {
--scrollTime:400ms;
  margin:0;
  padding:0;
  overflow:hidden;
}
div {
  width:100vw;
  height:100vh;
}
svg {
  width:100%;
  height:100%;
}
rect {
 cursor:pointer;
 transition:transform var(--scrollTime) linear;
}
rect {
  fill:rgba(50,50,50,1);
}
</style>
</head>
<body>
<div>
  <svg viewBox='31 100 1920 1080' preserveAspectRatio='xMaxYMin meet'>
	<defs>
    <filter id='bluredNoiseUnderDog' filterUnits='objectBoundingBox' x="0%" y="0%" width="100%" height="100%">
    <feDisplacementMap in="SourceGraphic" in2="img" xChannelSelector="R" yChannelSelector="G" scale="500">
                <animate attributeName="scale"
                	values="600;0;0" keyTimes="0;0.75;1" begin="0s" dur="12s" repeatCount="indefinite"/>
            </feDisplacementMap>
    </filter>
  </defs>
  	<image xlink:href='images/slides/slide1.png' x='0' y='0' width='1955' height='1080'/>
    <rect class='scrollObj' x='150' width='1600' y='265' height='925'/>
  </svg>
</div>
<script>
var i = 0, //through counter
		wheelArray = [], //wheel steps counter
		oldDelta = -1, //last wheel position
		scrollData = 0,
		scrollTime = 800,
		scrollCycle = null;
//MOUSEWHEEL SECTION
$(window).on('mousewheel', function(event){
  var delta = Math.round(event.originalEvent.deltaY);
  scrollData = scrollData - delta*2;
  wheelArray.push(delta);
  scrollTime = scrollTime-(scrollTime/wheelArray.length)/4;
  //console.log();
  console.log('wheelArray.length!',wheelArray.length,'\n','scrollTime!',scrollTime);
  clearTimeout(scrollCycle);
  scrollCycle = 
  setTimeout(function() {
  	setTimeout(function() {
  		wheelArray=[];
  		scrollTime = 800;
  	},100)
  	$('body').get(0).style.setProperty('--scrollTime',scrollTime+'ms');
  	wheelArray.splice(wheelArray.length-1);
	},100)
  console.log('wheelArray.length!',wheelArray.length);
  $('.scrollObj').css('transform','translateY('+scrollData+'px');

  console.log('mouse catched!',delta);

  /*clearTimeout(scrollCycle);
  scrollCycle = setTimeout(function (){
    if (wheelArray.length<5||scrollData==-608) {
      if (delta>oldDelta) {
        if (scrollData==0) {scrollData = -608;}
        else if (scrollData==-608) {scrollData= -1308;}
        oldDelta = delta-1;
      }
      else if (delta<oldDelta) {
        if (scrollData> -1308&&scrollData< 0) {scrollData= 0;}
        else if (scrollData== -1308) {scrollData= -543;}
        oldDelta = delta+1;
      }
    }
    else {
      if (delta>oldDelta) {scrollData = -1308;}
      else {scrollData = 0;}
    }
    $('rect:nth-child(1)').css('transform','translateY('+scrollData+'px');
    setTimeout(function(){
      $('rect:nth-child(2)').css('transform','translateY('+scrollData+'px');
      wheelArray = [];
    },450);
  },450);
  */
});
//MOUSEWHEEL SECTION

</script>
</body>
</html>