<!DOCTYPE html>
<html>
<head>
  <title>stratification</title>
<script src="jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.js"></script><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&amp;subset=cyrillic" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>
<link rel='stylesheet' type='text/css' href='sltv.css'>
</head> 
<body>
<header>
  <svg viewBox='0 3 508 17.2' preserveAspectRatio='xMinYMid meet'>
    <defs>
      <path id='arrowField' d='m 136.53963,15.614087 c 0,0.62426 0,0.62426 0.71311,0.62428 h 2.75477 c 0.71172,-2e-5 0.71172,0.002 0.71172,-0.62555 V 7.3429177 c 0,-0.62709 0,-0.62554 -0.71172,-0.62554 h -2.75477 c -0.71311,0 -0.71311,0 -0.71311,0.62428 z' style='fill:#2e2e2e;fill-opacity:1;stroke:none;'/>
      <path id='navArrow' style='fill:none;stroke:#a3a3a3;stroke-width:0.4;stroke-linecap:butt;' d='m 137.58187,10.997367 1.05513,1.17713 1.05523,-1.17713'/>
      <path id='slideArrow' style='fill:none;stroke:#a3a3a3;stroke-width:2;stroke-linecap:butt;' d='m -116.50441,82.01615 -7.29142,6.535774 7.29142,6.536334'/>
      <linearGradient id='mainSlideShadow' x1='0%' y1='0%' x2='0%' y2='100%'>
        <stop offset='0%' stop-color='rgba(0,0,0,0)'/>
        <stop offset='20%' stop-color='rgba(0,0,0,.3)'/>
        <stop offset='70%' stop-color='rgba(0,0,0,.8)'/>
        <stop offset='100%' stop-color='rgba(0,0,0,1)'/>
      </linearGradient>
      <image id='videoIcon' xlink:href='images/ui/videoIcon.png' x='0' y='0' width='14' height='10'/>
      <path id='seriesBaseTmplt' style='fill:inherit;stroke:none;' d='m 1693.2242,445.70457 3.9258,-23.90016 -3.637,-6.35024 60.5006,1.78969 -5.0224,26.38236 z'/>
    </defs>
    <g id='navbar'>
      <circle style='fill:none;stroke:#535252;stroke-width:0.5;' cx='238.4' cy='2.8' r='1.6'/>
      <path style='fill:none;stroke:#535252;stroke-width:0.4;stroke-linecap:butt;' d='m 237.8,3.1  0.68404  -0.89661'/>
        <!--<path style='fill:#1f1f1f;stroke:none;' d='m 269.63305,4.8970762 c 0,0.31271 0,0.31271 0.40599,0.31272 h 1.56835 c 0.4052,-1e-5 0.4052,10e-4 0.4052
        ,-0.31335 V 0.75389615 c 0,-0.31412001 0,-0.31335001 -0.4052,-0.31335001 h -1.56835 c -0.40599,0 -0.40599,0 -0.40599,0.31272001 z'/>-->
      <use href='#navArrow' x='278' y='-7' transform='scale(.65)'/>
      <use href='#navArrow' x='0' y='-.1'/>
      <use href='#navArrow' x='91.2' y='-.1'/>
      <use href='#navArrow' x='242' y='-.1'/>
      <text id='nav' x='123' y='4'>
        <tspan x='130'>NETWORK</tspan>
        <tspan x='242'>KIEV GMT+2 (23:39)</tspan>
        <tspan x='360.2'>SIGN UP</tspan>
        <tspan x='372.5' fill='rgb(82,82,82)'>OR</tspan>
        <tspan x='378'>LOGIN</tspan>
      </text>
      <text id='bar' y='13'>
        <tspan  x='209'>LEAGUES</tspan>
        <tspan  x='237'>NEWS</tspan>
        <tspan  x='253'>TOURNAMENTS</tspan>
        <tspan  x='287'>RATINGS</tspan>
        <tspan  x='307.5'>MATCH CENTER</tspan>
        <tspan  x='341.5'>STATISTIC</tspan>
      </text>
      <image xlink:href='images/ui/networkIcon.png' x='124.5' y='.9' width='4' height='4'/>
      <image xlink:href='images/ui/signIcon.png' x='355' y='.9' width='4' height='4'/>
      <image xlink:href='images/ui/dotaDiscIcon.png' x='128' y='8' width='6.5' height='6.5'/>
      <image xlink:href='images/ui/starladderWhite.png' x='153' y='2.3' width='45' height='15'/>
      <image xlink:href='images/ui/gbLandIcon.png' x='370' y='8.3' width='6' height='6'/>
    </g>
    <g id='traps' style='fill:#8484ff;fill-opacity:0.4;stroke:none;'>
      <rect x='124' y='.5' width='20' height='5'/>
      <rect x='236' y='.5' width='35.7' height='5'/>
      <rect x='350' y='.5' width='17' height='5'/>
      <rect x='372' y='.5' width='11' height='5'/>
      <rect x='126' y='6.4' width='14.5' height='10'/>
      <rect x='208' y='6.4' width='23.5' height='10'/>
      <rect x='234.5' y='6.4' width='13.5' height='10'/>
      <rect x='251' y='6.4' width='31' height='10'/>
      <rect x='285' y='6.4' width='19' height='10'/>
      <rect x='306' y='6.4' width='32' height='10'/>
      <rect x='340.5' y='6.4' width='21.5' height='10'/>
      <rect x='364.7' y='6.4' width='14.5' height='10'/>
    </g>
  </svg>
</header>
</body>
<script>
/*
var i = 0, //through counter
range = 3, //slider recharge range (main have 3, secondary have 5)
preloadStep = .66, //this is saturate filter position on preload star
scenario = null, //contain setInterval with slider recharges
screenSwitcher = 'main', //animating class console
mainObj = {
  "mainSlider" : [
    ["images/slides/slide0.png","TEAM MALAYSIA ADVANCE","SEA PLAY-OFF",false,"16:56"],
    ["images/slides/slide1.png","Backdoor regen increased!","gameplay update",false,"18:08"],
    ["images/slides/slide2.png","Resolut1on","in da OG house!",false,"Tomorrow"],
    ["images/slides/slide3.png","We got a partner!","DreamTeam with us!",true,"Tomorrow"],
    ["images/slides/slide4.png","Dota Summit 8","Смотри вместе с нами!",false,"23 Jan"],
    ["images/slides/slide5.png","title","semiTitle","Easterday"]
  ],
  "matches":{ 
    "today":[
      ["00:00","Virtus Pro","Rox.KIS",1],
      ["00:00","Hellraisers","Natus Vincere",2],
      ["00:00","RNC","Natus Vincere",3],
      ["18:30","DF","iLight",0],
      ["20:00","Moskow 5","NiP",0]
    ],
    "tomorrow":[
      ["16:00","Hellraisers","Natus Vincere",0],
      ["17:30","Virtus Pro","Rox.KIS",0],
      ["19:00","RNC","Natus Vincere",0],
      ["20:00","DF","iLight",0],
      ["20:30","Moskow 5","NiP",0]
    ]
  }
},
date = new Date(),
datePref = {
  'day':'numeric',
  'weekday':'short',
  'month':'short',
  'year':'numeric'
},
dateArray = [],
wheelArray = [], //wheel steps counter
oldDelta = -1, //last wheel position
scrollData = 0, 
scrollTime = 800,
scrollCycle = null;

//DOC READY
$('document').ready(function(){
  $(window).scrollTop(0);
  $('header').addClass('headerIn');
  i=0;
  initiation();
  //preload();
  //sliderRecharge();
});
//DOC READY


//////////////////////////////////////////////////////////////////////
//IMAGES PRECASH AND AJAX REQUEST DATA DISTRIBUTION
/////////////////////////////////////////////////////////////////////

//PRELOADING SECTION
function initiation() {
  var preloadStep = window['cash'+i];
  cashedImg = new Image();
  cashedImg.onload = function(){preloadStep();}
  cashedImg.src = Object.values(mainObj)[0][i][0];
  $('#cashCont').append(cashedImg);
}
//preloading steps
function cash0() {
  $('.mainSlide').attr('xlink:href',Object.values(mainObj)[0][i][0]);
  preloadCycle = setInterval(function(){
    if (i>preloadStep) {
    $('#preloadFilter').attr('height',i);
    i=i-.008;
    }
    else {
      clearInterval(preloadCycle);
      i=1,preloadStep=.33;
      setTimeout(initiation(),400);
    }
  },15);
}
function cash1() {
  $('.secondaryAnimationClassRefresh').attr('xlink:href',Object.values(mainObj)[0][4][0]);
  i=.66;
  preloadCycle = setInterval(function(){
    if (i>preloadStep) {
      $('#preloadFilter').attr('height',i);
      i=i-.008;
    }
    else {
      clearInterval(preloadCycle);
      i=2,preloadStep=0;
      initiation();
    }
  },15);
}
function cash2() {
  i=.33;
  preloadCycle = setInterval(function(){
    if (i>preloadStep) {
      $('#preloadFilter').attr('height',i);
      i=i-.008;
    }
    else {
      clearInterval(preloadCycle);
      i=3;
      initiation();
      sliderRecharge();
    }
  },15);
}
function cash3() {$('#preloader').css('opacity',0);i++;initiation();matchesParsing();}
function cash4() {
  //$('#secondaryCoverCont').css('transform','translateY(0px)');
  i++;initiation();
}
function cash5() {i=0;setTimeout(function(){
  $('#preloader').remove();
  $('#secondaryCoverCont').addClass('saturatedSecondaryCover');
  //$('#mainGlobalGroup').css('transform','translateY(0px)');
},400);}
//PRELOADING SECTION

//PARSING OF MATCHES DATA
function matchesParsing() {
  $('#today g').each(function(){
    var i=0,gIndex=$(this).index();
    while (i<=3) {
      $(this).find('tspan').eq(i).text(Object.values(mainObj.matches.today)[gIndex][i]);
      i++; 
    }
    if (Object.values(mainObj.matches.today)[gIndex][3]!=0) {
      $(this).children('use').show();
      $(this).find('text tspan').eq(3).show();
    }
  });
  $('#tomorrow g').each(function(){
    var i=0,gIndex=$(this).index();
    while (i<=3) {
      $(this).find('tspan').eq(i).text(Object.values(mainObj.matches.tomorrow)[gIndex][i]);
      i++; 
    }
    if (Object.values(mainObj.matches.tomorrow)[gIndex][3]!=0) {
      $(this).children('use').show();
      $(this).find('text tspan').eq(3).show();
    }
  });
  dateSetter();
  newsParsing();
}
//PARSING OF MATCHES DATA

//THIS IS DATE SETTER SECTION
function dateSetter() {
  dateArray = date.toLocaleString("en-US", datePref).replace(/[,]/g, '').split(' ');
  $('#matchesDayData tspan').eq(0).text(dateArray[2]+' '+dateArray[1]+' '+dateArray[3]+', '+dateArray[0]);
  date = new Date();
  date.setDate(date.getDate()+1);
  dateArray = date.toLocaleString("en-US", datePref).replace(/[,]/g, '').split(' ');
  $('#matchesDayData tspan').eq(1).text(dateArray[2]+' '+dateArray[1]+' '+dateArray[3]+', '+dateArray[0]);
}
//THIS IS DATE SETTER SECTION

//NEWS DATA PARSING FOR NEWS TABLE
function newsParsing() {
  $('#news text').each(function(){
    var newsIndex=$(this).index();
    $(this).find('tspan').eq(0).text(Object.values(mainObj.mainSlider)[newsIndex][2]+': '+Object.values(mainObj.mainSlider)[newsIndex][1]);
    $(this).find('tspan').eq(1).text(Object.values(mainObj.mainSlider)[newsIndex][4]);
  });
  
}
//NEWS DATA PARSING FOR NEWS TABLE



//////////////////////////////////////////////////////////////////////
//ANIMATION CYCLES AND USER'S EVENTS
/////////////////////////////////////////////////////////////////////

//THIS STUFF FOR FREEZE SLIDER RECHARGE WHILE USER IS DOING SOMETHING
function sliderFreeze() {clearInterval(scenario);setTimeout(sliderRecharge(),4500);}
//THIS STUFF FOR FREEZE SLIDER RECHARGE WHILE USER IS DOING SOMETHING

//SLIDER RECHARGE SECTION
function sliderRecharge() {
  scenario = setInterval(function(){
    timelineRunForward();
    contentRefresh();
  },6000);
}
function contentRefresh() {
  $('.'+screenSwitcher+'SlideRefresh').each(function(){
    var el = $(this),
    newone = el.clone(true);
    el.before(newone);
    $(this).remove();
  });
  setTimeout(function(){
    if (i<range) {
      $('#news text').eq(i).children(0).css('fill','rgb(20,20,20)');
      i++; 
      $('.'+screenSwitcher+'Slide').attr('xlink:href',Object.values(mainObj)[0][i][0]);
      $('#'+screenSwitcher+'SliderTitle tspan').eq(0).text(Object.values(mainObj)[0][i][2].toUpperCase());
      $('#'+screenSwitcher+'SliderTitle tspan').eq(1).text(Object.values(mainObj)[0][i][1].toUpperCase());
      $('#news text').eq(i).children(0).css('fill','rgb(224,27,27)');
      $('#newsArrow').css('transform','translateY('+42*i+'px)');
    }
    else {
      $('#news text').eq(i).children(0).css('fill','rgb(20,20,20)');
      i=0;
      $('.'+screenSwitcher+'Slide').attr('xlink:href',Object.values(mainObj)[0][i][0]);
      $('#'+screenSwitcher+'SliderTitle tspan').eq(0).text(Object.values(mainObj)[0][i][2].toUpperCase());
      $('#'+screenSwitcher+'SliderTitle tspan').eq(1).text(Object.values(mainObj)[0][i][1].toUpperCase());
      $('#news text').eq(0).children(0).css('fill','rgb(224,27,27)');
      $('#newsArrow').css('transform','translateY(0px)');
    }
  },700);
}
//SLIDER RECHARGE SECTION

//TIMELINE RUN SECTION
function timelineRunForward() {
  var timelinePosion=1020-1020/range*(i+1);
  if (i<range) {$('#'+screenSwitcher+'Timeline').css('stroke-dashoffset',timelinePosion+'px');}
  else {$('#'+screenSwitcher+'Timeline').css('stroke-dashoffset','1020px');}
}
function timelineRunBack() {
  var timelinePosion=1020-1020/range*(i+1);
  if (i<range-1) {$('#'+screenSwitcher+'Timeline').css('stroke-dashoffset',timelinePosion+'px');}
  else {$('#'+screenSwitcher+'Timeline').css('stroke-dashoffset','0px');}
}
//TIMELINE RUN SECTION

//MAIN SLIDER ARROWS CLICK
$(document).on('click','.'+screenSwitcher+'ArrowTrap',function(){
  sliderFreeze();
  if ($(this).index()==0) {
    if (i>0) {
      i=i-2;
      timelineRunBack();
      contentRefresh();
    }
    else {
      i = 2;
      timelineRunBack();
      contentRefresh();
    }
  }
  else {
    contentRefresh();
    timelineRunForward();
  }
});
//MAIN SLIDER ARROWS CLICK

//MOUSEWHEEL SECTION

$(window).on('mousewheel', function(event){
  clearInterval(scenario);
  var delta = Math.round(event.originalEvent.deltaY);
  scrollData = scrollData - delta*2;
  if (scrollData<=0&&scrollData>=-1150) {
    if (scrollData>-530) {
      $('#cheker').text('ZONE A '+scrollData).css('fill','green');
      screenSwitcher='main';
      range=3;
    }
    else if (scrollData>-840&&scrollData<=-530) {
      $('#cheker').text('ZONE B '+scrollData).css('fill','blue');
      screenSwitcher='secondary';
      range=4;
    }
    else  {
      $('#cheker').text('ZONE C '+scrollData).css('fill','red');
      screenSwitcher='footer';
    }
  wheelArray.push(delta);
  scrollTime = scrollTime-(scrollTime/wheelArray.length)/4;
  
  $('#mainGlobalGroup').css('transform','translateY('+scrollData+'px');
  $('#secondaryCoverCont').css({
    'transform':'translateY('+scrollData+'px',
    'transition':'transform 450ms ease-out'
  });
  sliderFreeze();
  }
  else if (scrollData>0 ){scrollData=0;sliderFreeze();}
  else if (scrollData<=-1150){scrollData=-1150;sliderFreeze();}
});
$(window).on('mousewheel', function(event){
  clearInterval(scenario);
  var delta = Math.round(event.originalEvent.deltaY);
  wheelArray.push(delta);
  scrollTime = scrollTime-(scrollTime/wheelArray.length)/4;
  clearTimeout(scrollCycle);
  scrollCycle = setTimeout(function (){
    if (wheelArray.length<5||scrollData==-608) {
      if (delta>oldDelta) {
        if (scrollData==0) {
          scrollData = -608;
          $('#secondaryCoverImage').css('opacity',1); //unhide second slider cover
          $('header').css('top','-3.33vw'); //hide header
          $('#mainCoverCont,#mainSlider').delay(1500).hide(1);
        }
        else if (scrollData==-608) {
          scrollData= -1308;
          clearInterval(scenario);
        }
        oldDelta = delta-1;
      }
      else if (delta<oldDelta) {
        if (scrollData> -1308&&scrollData< 0) {
          scrollData= 0;
          $('header').css('top','0vw'); //unhide header
          $('#secondaryCoverImage').css('opacity',0); //hide second slider cover
          $('#mainCoverCont,#mainSlider').show();
        }
        else if (scrollData== -1308) {
          sliderFreeze();
          scrollData= -543;
          $('header').css('top','0vw'); //unhide header
        }
        oldDelta = delta+1;
      }
    }
    else {
      if (delta>oldDelta) {
        scrollData = -1308;
        clearInterval(scenario);
        $('header').css('top','-3.33vw'); //hide header
        $('#secondaryCoverImage').css('opacity',1); //unhide second slider cover
        $('#mainCoverCont,#mainSlider').delay(1500).hide(1);
      }
      else {
        scrollData = 0;
        sliderFreeze();
        $('header').css('top','0vw'); //unhide header
        $('#secondaryCoverImage').css('opacity',0); //unhide second slider cover
        $('#mainCoverCont,#mainSlider').show();
      }
    }
    $('#mainGlobalGroup').css('transform','translateY('+scrollData+'px');
    setTimeout(function(){
      $('#secondaryCoverGroup').css('transform','translateY('+scrollData+'px');
      wheelArray = [];
    },450);
    sliderFreeze();
  },450);
});
//MOUSEWHEEL SECTION
*/
</script>
</body>
</html>